"ziv_knight_stone_form"
{
  "BaseClass"           "ability_datadriven"
  "AbilityBehavior"       "DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_CHANNELLED"
  "AbilityTextureName"            "ziv_empty"

  "AbilityCastRange"        "0"
  "AbilityCastPoint"        "0.1"
  "AbilityCooldown"         "20"
  "AbilityChannelTime"      "7"

  "AbilityManaCost"       "20"
  
  "MaxLevel"          "7"

  "precache"
  {
    "particle"  "particles/units/heroes/hero_visage/visage_stone_form.vpcf"
    "particle"  "particles/status_fx/status_effect_medusa_stone_gaze.vpcf"
    "soundfile" "soundevents/game_sounds_heroes/game_sounds_medusa.vsndevts"
    "soundfile" "soundevents/game_sounds_heroes/game_sounds_leshrac.vsndevts"
  }
  
  "AbilitySpecial"
  {
    "01"
    {
      "var_type"            "FIELD_FLOAT"
      "damage_amp"            "0.04"
    }
    "02"
    {
      "var_type"            "FIELD_FLOAT"
      "heal_amp"            "0.9"
    }
    "03"
    {
      "var_type"            "FIELD_INTEGER"
      "explosion_radius"            "450"
    }
    "04"
    {
      "var_type"            "FIELD_INTEGER"
      "duration"            "7"
    }
    "05"
    {
      "var_type"            "FIELD_INTEGER"
      "max_targets"            "10"
    }
  }

  "OnSpellStart"
  {
    "RunScript"
    {
      "ScriptFile"  "abilities/heroes/knight/ziv_knight_stone_form.lua"
      "Function"    "StoneFormStart"
    }
    "FireSound"
    {
      "EffectName"  "Hero_Medusa.StoneGaze.Target"
      "Target"     "CASTER"
    }
    "ApplyModifier"
    {
      "ModifierName"  "modifier_stone_form"
      "Target"     "CASTER"
      "Duration"    "%duration"
    }
  }

  "OnChannelSucceeded"
  {
    "RunScript"
    {
      "ScriptFile"  "abilities/heroes/knight/ziv_knight_stone_form.lua"
      "Function"    "StoneFormEnd"
    }
    "FireSound"
    {
      "EffectName"        "Hero_Leshrac.Split_Earth.Tormented"
      "Target"            "CASTER"
    }
  }

  "Modifiers"
  {
    "modifier_stone_form"
    {
      "IsHidden"      "0"
      "IsDebuff"      "0"

      "StatusEffectName"      "particles/status_fx/status_effect_medusa_stone_gaze.vpcf"     
      "StatusEffectPriority"  "10"

      "States"
      {
        "MODIFIER_STATE_ROOTED"        "MODIFIER_STATE_VALUE_ENABLED"
        "MODIFIER_STATE_COMMAND_RESTRICTED"         "MODIFIER_STATE_VALUE_ENABLED"
      }

      "Properties"
      {
        "MODIFIER_PROPERTY_ABSOLUTE_NO_DAMAGE_PHYSICAL" "1"
      }
    }

    "modifier_stone_form_stacks"
    {
      "Passive"      "0"
      "IsHidden"      "1"
      "IsDebuff"      "0"

      "OnAttacked"
      {
        "RunScript"
        {
          "ScriptFile"  "abilities/heroes/knight/ziv_knight_stone_form.lua"
          "Function"    "OnAttacked"
          "attack_damage" "%attack_damage"
        }
      }
    }
  }
}